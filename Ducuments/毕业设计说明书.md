# 智能停车场管理系统开发

* 摘要
* 目录

[TOC]

## 引言

## 1 综述

### 1.1 研究背景及其重要性

#### 1.1.1 社会背景

自改革开放以来，我国汽车产业的飞速发展，特别是国产新能源汽车的崛起，使得汽车不再是遥不可及的进口奢侈品，而是转变为经济适用、质量上乘的国产高端商品。随着人们收入水平的稳定提升和生活品质的持续改进，越来越多的家庭有能力购买汽车，汽车已经深入到了普通家庭。汽车的普及率持续攀升，这意味着城市中的汽车数量在不断增长，从而带来了停车需求的增加。这一变化反映了我国社会经济的快速发展和人民生活水平的提高。

尽管汽车数量和停车场数量都在增长，但停车位的供应仍然无法满足停车的需求。根据国家发改委公布的数据，目前我国的停车需求接近3亿，大城市的小汽车与停车位的比例约为1:0.8，中小城市约为1:0.5，而发达国家约为1:1.3。

表格 1.1 2014年至2022年停车位数量与汽车保有量数据

| **年份**           | **2014** | **2015** | **2016** | **2017** | **2018** | **2019** | **2020** | **2021** | **2022** |
| :----------------- | :------- | :------- | :------- | :------- | :------- | :------- | :------- | :------- | :------- |
| **停车位数量**     | 6598     | 6935     | 7890     | 8920     | 10150    | 11500    | 12900    | 14500    | 16885    |
| **全国汽车保有量** | 15400    | 17200    | 19400    | 21700    | 24000    | 26000    | 28100    | 30200    | 31900    |
| **缺口**           | 8802     | 10265    | 11510    | 12780    | 13850    | 14500    | 15200    | 15700    | 15015    |

根据公安部政府网站的数据，截至2023年9月底，全国机动车达4.3亿辆，驾驶人达5.2亿人，新能源汽车保有量达1821万辆。2023年一至三季度，全国新注册登记汽车1817万辆，同比增长4.4%，一季度、二季度、三季度新注册登记汽车分别为588万辆、587万辆、642万辆。

然而，全国汽车拥有量的逐年增加也带来了严重的停车难题。驾驶员常常难以找到合适的停车位，使得停车变得异常困难。此外，当人们在公共场所完成购物、聚会等活动后，由于遗忘了停车位信息，往往难以找到自己的车辆，甚至在找到车辆后也难以找到出口。传统的停车场管理模式依赖人工操作，效率低下、易出错，无法满足大型停车场的管理需求。作为城市交通管理的关键组成部分，停车场当前面临着一系列的问题和挑战。

#### 1.1.2 技术背景

随着移动互联网的广泛应用以及大数据、物联网、云服务等先进技术的深入应用，智慧停车逐渐成为新型城市的标配，传统停车场也在向智慧化、数字化方向转变。智慧停车系统有助于改善局部交通微循环、减缓交通拥堵，提供更优质的停车服务，为城市智慧交通和智慧城市的建设提供助力。

#### 1.1.3 重要性

随着我国汽车产业的飞速发展和汽车保有量的逐年增加，停车问题已经成为了影响城市交通、环境和居民生活质量的重要因素。传统的停车场管理模式已经无法满足当前的停车需求，而智慧停车作为一种新型的停车解决方案，能够有效地解决停车难题，提高停车效率，减少交通拥堵，提升城市交通管理水平，对于推动我国城市的智慧化建设具有重要的意义。因此，对智慧停车的研究具有重要的理论和实践价值。这不仅可以推动我国城市的智慧化建设，也可以为全球其他城市提供参考和借鉴，推动全球城市的智慧化发展。这是一项具有深远影响和广泛应用前景的研究。

### 1.2 国内外智能停车场管理系统的研究现状

智能停车场管理系统的研究涵盖了多个关键领域，包括车辆进出停车场的流程、车主寻找车位的过程，以及停车场管理和用户应用的体验。在这些领域中，车牌识别技术和车位监测技术是至关重要的。

#### 1.2.1 车牌识别技术



#### 1.2.2 车位检测技术



#### 1.2.3 停车场管理与用户软件



### 1.3 毕业设计的主要工作



## 2 相关理论与技术基础

### 2.1 深度学习与数字图像处理基础

#### 2.1.1 YOLOv5 目标检测算法

YOLOv5是YOLO（You Only Look Once）系列的最新发展，是一种目标检测算法。YOLO系列以其快速、高效的特点而广受好评，能够在一张图像中同时检测出多个目标，并且在实时应用中表现良好。相较于之前的版本，YOLOv5由ultralytics团队开发，对模型结构、性能和速度都进行了改进。

YOLOv5的设计理念是简化和优化，采用了PyTorch框架实现，使其易于使用和训练。在许多计算机视觉应用中，YOLOv5已经取得了良好的效果，包括物体检测、行人检测、交通标志检测等。

此外，YOLOv5-face是一种基于深度学习的人脸检测技术，其开源框架被许多开发者所使用。在该检测技术的基础上，一些开发者进行了修改，并开发出了用于检测车辆车牌的目标检测模型，该模型的源代码已经在GitHub上开放。

#### 2.1.2 OpenCV 计算机视觉库

OpenCV（Open Source Computer Vision Library）是一个开源的计算机视觉库，被广泛应用于图像处理、计算机视觉、机器学习等领域。它提供了丰富的功能和算法，涵盖了从基础的图像操作（如图像读取、保存、缩放、旋转等）到高级的计算机视觉任务（如目标检测、人脸识别、运动跟踪等）的各个方面。

在车牌识别这个场景中，使用OpenCV开源视觉库具有重要意义。由于车辆在行驶过程中角度不同，摄像头的位置和角度也会发生变化，导致拍摄到的车牌图像可能存在畸变。这种畸变可能会影响后续的车牌识别准确性。因此，通过OpenCV提供的图像处理功能，可以对拍摄到的车牌图像进行畸变校正，使其在角度上对齐，从而更好地输入到文本识别网络中进行处理。这样的预处理步骤有助于提高车牌识别系统的性能和准确性，使其更适用于实际应用场景。

#### 2.1.3 CRNN 文本识别网络

CRNN（Convolutional Recurrent Neural Network）是一种用于文本识别的深度学习模型，将卷积神经网络（CNN）和循环神经网络（RNN）相结合。这种模型能够有效地处理不定长度的序列数据，因此在场景文本识别、光学字符识别（OCR）等任务中得到了广泛应用。

CRNN文本识别网络主要用于识别输入车牌图像中的车牌号码，并将图像信息转换为文字信息。由于车牌号码的长度可能各不相同，因此采用不定长的序列识别方法相较于传统的文字切割再识别更为适用。CRNN网络能够直接从整张图像中提取并识别出车牌号码，从而简化了识别过程，并提高了识别的准确性和效率。

### 2.2嵌入式系统基础

#### 2.2.1 树莓派硬件平台及其操作系统

树莓派（Raspberry Pi）是一款低成本、高性能的单板计算机，广泛应用于教育、嵌入式开发、物联网和个人项目等领域。树莓派5是Raspberry Pi系列计算机中的新一代旗舰产品。与前代产品Raspberry Pi 4相比，它的CPU性能提高了2~3倍，GPU性能大幅提升，摄像头、显示功能和USB接口也得到了改进。

##### （1）硬件参数

1. 处理器

   树莓派5采用了运行频率为2.4GHz的Broadcom最新推出的一款四核64位Arm Cortex-A76处理器：BCM2712。与树莓派4相比，CPU性能提高了2至3倍。此外，树莓派5还利用了内部构建的芯片RP1，为其提供了丰富的I/O（输入/输出）功能。

   BCM2712采用了TSMC 16nm工艺，相较于其他同类型产品使用的TSMC 8nm工艺落后了两代。因此，在运行时必须使用足够大的散热片和散热风扇来保持良好的温度控制。此外，供电要求也提高到了5V 5A，相较于前代的5V 3A，要求更高。

2. 数据接口

   

##### （2）操作系统

树莓派OS（Raspbian OS）是一款基于Debian的免费操作系统，专门为树莓派硬件进行了优化，因此是在树莓派上正常使用的推荐操作系统。这个操作系统附带了超过35,000个软件包，这些软件包都以良好格式捆绑，并且已经进行了预编译，因此可以轻松地安装在树莓派上。

1. 摄像头驱动

   

2. GPIO Zero 模块

   

#### 2.2.2 STM32 微控制器硬件平台

STM32是一系列由意法半导体（STMicroelectronics）公司推出的32位ARM Cortex-M微控制器系列的总称。这些微控制器被广泛用于各种嵌入式系统中，从简单的家用电器到复杂的工业自动化设备等等。STM32F1系列作为STM32微控制器系列中的入门款芯片，具有出色的性能和丰富的功能，是嵌入式系统开发中的重要组成部分。这些芯片通过GPIO、USART等端口可以连接各种传感器和外围设备，实现对外部环境的监测和控制。

在具体应用中，笔者使用的STM32F103ZET6芯片拥有多达100个引脚，主频可达72MHz，拥有丰富的外设资源。借助这些功能，可以轻松地连接超声波传感器、网络通信模块等外部设备。例如，通过连接超声波传感器，可以实时监测车位的占用情况；而通过网络通信模块，则可以将监测到的数据及时上报至服务器，实现智能化的车位管理系统。这样的应用场景体现了STM32系列微控制器在物联网、智能交通等领域的重要作用，为嵌入式系统的开发和应用提供了强大的支持。

#### 2.2.3 MQTT 通信协议

MQTT（Message Queuing Telemetry Transport）是一种轻量级的、基于发布/订阅模式的通信协议，旨在连接各种设备，并使它们能够进行实时通信。

### 2.3 管理系统与用户软件

 #### 2.3.1 Qt 应用框架

Qt是一个跨平台的C++应用程序开发框架，由Qt公司于1995年首次发布。它提供了一套丰富的库和工具，用于开发图形用户界面（GUI）、网络应用、嵌入式应用和其他类型的软件。Qt的跨平台特性使得开发者可以轻松地编写一次代码，然后在多个平台上进行部署，包括Windows、macOS、Linux等。

基于Qt框架开发的应用可以满足各种需求，从简单的桌面软件到复杂的企业级应用都能实现。举例来说，作者使用Qt框架开发了一款Windows平台的管理系统，该系统采用前后端分离的架构，Qt用于前端应用，主要用于管理车辆出入口和停车场管理。这个系统能够填补硬件无法处理、需要人工干预的需求，提高管理效率和准确性。

此外，基于Qt框架开发的管理系统还提供了一些基本的停车场管理功能，如车辆进出记录的管理、收费管理等。这些功能为停车场管理者提供了便利，使他们能够更高效地管理停车场的运营。Qt框架的强大功能和跨平台特性为这类应用的开发提供了可靠的基础，使开发者能够快速地开发出高质量的软件应用。

#### 2.3.2 微信小程序及其应用框架

微信小程序是一种轻量级应用程序，可在微信客户端内直接运行，无需下载安装即可使用。微信最初是一款即时通讯应用，用户可以通过文本、语音、图片、视频等多种形式与朋友、家人和同事进行交流。现在，用户可以在微信中运行特制的小程序应用。

微信小程序应用框架是一套基于微信开发者工具提供的开发环境和相关技术，用于快速开发、调试和发布微信小程序的框架。笔者利用微信小程序开发者工具开发了用户端软件，主要技术包括前端web框架，为用户提供了扫码支付出场功能、汽车位置查询等服务。

#### 2.3.3 Spring Boot 微服务框架

Spring Boot是一个用于构建基于Spring的应用程序的框架，它简化了Spring应用程序的开发过程，提供了一种快速开发、简化配置、自动化配置和部署的方式。

在我使用Spring Boot构建微服务框架时，我还充分利用了其丰富的扩展功能。通过集成Spring Boot Starter依赖和自定义配置，我能够轻松地集成各种第三方库和服务，以满足项目的需求。例如，我可以利用Spring Boot整合MyBatis对数据库进行增删改查，实现多种需求。

通过充分利用Spring Boot的扩展功能，我能够更快地开发出功能完善、性能优异的微服务应用，为用户提供更好的体验。

## 3 需求分析

### 3.1可行性分析

#### 3.1.1 技术可行性

根据前述对智能停车场管理系统相关理论与技术基础的阐述，我们可以得出，在树莓派硬件平台和STM32微控制器硬件平台上连接摄像头、传感器以及网络通信模块，部署车牌和车辆识别模型，从而实现车牌与车位的检测是可行的。此外，在树莓派上搭建数据库，并部署Spring Boot微服务框架，能够有效响应来自管理员和用户的请求。这样一来，系统就能够满足用户的各种需求，包括出场时的寻车导航和扫码付款等功能。

在树莓派硬件平台和STM32微控制器硬件平台上连接摄像头、传感器以及网络通信模块，部署车牌和车辆识别模型，从而实现车牌与车位的检测是可行的。此外，利用树莓派搭建数据库，并部署Spring Boot微服务框架，能够有效响应来自管理员和用户的请求。这样一来，系统就能够满足用户的各种需求，包括出场时的寻车导航和扫码付款等功能。

下面是系统的技术数据流图，数据源/终点包括普通用户、汽车和管理员：

| 数据源/终点                                                  | 数据处理                                                 |
| ------------------------------------------------------------ | -------------------------------------------------------- |
| 汽车                                                         | 驶入驶出停车场                                           |
| 用户                                                         | 请求寻车导航、扫码付款                                   |
| 管理员                                                       | 监控停车场状态、处理异常情况等操作                       |
| **数据流**                                                   | **数据存储**                                             |
| 输入：汽车出入停车场的图像信号、管理员用户输入的车牌号、汽车泊入停车位时的物理信号；<br />输出：出入库数据、支付二维码图像、停车费用、停车位地图数据 | 汽车图像、时间日期、停车出入数据、二维码图像、停车位信息 |

<img src="./毕业设计说明书.assets/image-20240502165856143.png" alt="image-20240502165856143" style="zoom:67%;" />

<center>图 3.1.1 智能停车场管理系统数据流图</center>

#### 3.1.2. 经济可行性

##### （1）成本分析

表 硬件清单及其费用

| 硬件名称                | 单价      | 需求数               | 备注                                                         |
| ----------------------- | --------- | -------------------- | ------------------------------------------------------------ |
| 树莓派5硬件平台（8GB）  | 80美元    | 停车场出入口/台      | 价格不含进出口税，约585人民币                                |
| IMX219 树莓派摄像头     | 79人民币  | 停车场出入口/2个     |                                                              |
| 二维码显示屏            | 100人民币 | 停车场出入口/台      | 二维码信息量不同，对应的屏幕大小，对应的价格不同             |
| STM32F103ZET6最小系统板 | 80元      | 约10个停车位/台      | 不同的STM32芯片的最小系统板GPIO端口数量不同，能够检测的停车位数量也不同。 |
| 超声波传感器            | 8元       | 停车位/个            |                                                              |
| 商用宽带与域名          | 1000元    | 按年支付             | 不同地区收费标准不同                                         |
| 场地承包（含管理费）    | 500,000元 | 按10年为一个周期租赁 | 以与场地所有方达成一致的租赁合同为准                         |
| 水电、照明安装          | 10,000元  | 仅初次安装           | 不同地区物价不同                                             |
| 水电费用                | 1,000元   | 按月支付             | 不同地区收费标准不同                                         |
| 人力资源支出            | 10,000元  | 按月支付             |                                                              |

假设我们需要的硬件数量分别为：树莓派5硬件平台2台，IMX219 树莓派摄像头4个，二维码显示屏2台，STM32F103ZET6最小系统板26个，以及256个超声波传感器。此外，商用宽带与域名费用按照1000元/年计算，场地承包费用为500,000元，水电、照明安装费用为10,000元，水电费用按照1000元/月计算，人力资源支出为10,000元/月。

经过详细计算，我们得出对于一个拥有256个停车位的停车场，10年运营需要投入的费用为2,242,541.54元。

这一数据显示了系统建设和运营的综合成本，包括硬件设备、网络费用、场地租赁和水电费用等各项开支。这些成本是项目启动和持续运营的重要基础，也为后续的收益预测和投资回报率分析提供了基础数据。

##### （2）收益预测

停车场的主要收入来源于停车费和增值服务的收费。以桂林市为例，停车场通常采用计时收费制，不区分白天和夜间，超过24小时后重新计时，不足1小时则按1小时计费。在商业区的停车场，主要的停车人群包括商业圈的访客和周边住宅的居民。对于访客来说，每天乘坐私家车的访客数量约为150人，他们的停车时间通常在2到4小时之间。而对于周边的住户来说，他们使用停车场的车辆数量约为150辆，其中购买了车位租赁的住户数量约为50名，他们的平均每日停放时间在8到16小时之间。

假设向当地物价部门申报的停车收费标准为每小时2元，每日最高收费25元，车位租赁一个月为500元。根据这些数据，我们可以计算出停车场的月收入约为35,500元，因此，年收入可达到426,000元，而在10年的时间内，总收入可达到4,260,000元。停车收费属于不动产租赁服务，一般情况下，不动产租赁服务的增值税税率为9%，这适用于大多数企业。因此，税后的收入需要从总收入中扣除相应的税款。

##### （3）投资回报率

投资回报率（ROI）可以通过以下公式计算：

$𝑅𝑂𝐼=\frac{(总收入−总成本)}{总成本}×100\%$​

计算可得，停车场的收益率为50%。这意味着投资者每投入1元，就可以获得1.5元的回报。这样的收益率表明该停车场项目具有良好的经济效益，是一个值得投资的可行项目。不考虑外界突发因素，停车场可以在运营的第五年结束时收回成本。这种迅速的投资回收期显示了项目的高效性和吸引力，进一步加强了该项目的可行性和投资吸引力。

#### 3.1.3 操作可行性

##### （1）技术操作性分析

停车场管理系统的操作可行性主要取决于系统的技术实现和用户体验。首先，系统应具备稳定可靠的硬件平台，包括树莓派、摄像头、传感器等设备，以确保系统的正常运行和数据采集。其次，系统的软件部分需要具备良好的响应速度和稳定性，能够实现车辆识别、车位管理、用户信息处理等功能。对于管理员和用户而言，系统的操作界面应该简洁明了，功能操作易于理解和使用，从而提高操作效率和用户满意度。

##### （2）人力资源需求分析

停车场管理系统的运营需要一定的人力资源支持。主要包括技术维护人员、系统管理员和客服人员等。技术维护人员负责系统设备的安装、维护和故障排除；系统管理员负责系统的日常运行监控、数据管理和报表生成；客服人员则负责用户的问题解答、投诉处理和服务反馈。根据停车场规模和运营需求，合理配置人力资源，确保系统的稳定运行和用户服务。

#### 3.1.4 法律可行性

##### （1）合规性分析

停车场管理涉及到用户个人信息的收集、存储和处理，因此必须严格遵守相关的隐私保护法律法规。在中国，相关的法律包括《中华人民共和国个人信息保护法》、《网络安全法》等。停车场管理系统需要明确用户个人信息的采集目的、方式和范围，并获得用户的明示同意。此外，系统应采取必要的技术和管理措施，确保用户信息的安全和保密，防止信息泄露和滥用。

##### （2）知识产权保护

停车场管理系统涉及到软件开发、算法设计等知识产权领域。在系统设计和开发过程中，需要严格遵守知识产权法律法规，尊重他人的知识产权，不侵犯他人的专利、商标、著作权等权利。同时，对于系统开发中产生的知识产权，应进行合法注册和保护，确保自身的技术成果得到合法的保护和使用权。

##### （3）合同与协议遵从

停车场管理系统涉及到场地承包、服务协议等合同和协议。在与场地所有方和用户签订相关合同和协议时，需要确保合同内容合法合规，明确双方的权利义务和责任限制，有效保护自身的合法权益。同时，合同中的条款和约定应符合相关法律法规的要求，避免存在违法违规行为。

##### （4）监管合规性

停车场管理系统的运营需要符合相关监管部门的管理和监督。在系统设计和运营过程中，需要充分了解和遵守相关的行业标准和规范，确保系统的合规性和安全性。同时，建立健全的内部管理制度和监督机制，定期进行合规性审查和风险评估，及时调整和完善系统运营模式，以满足监管部门的要求。

### 3.2 功能需求



### 3.3 性能需求



### 3.4 安全需求



## 4 系统设计与实现

### 4.1 开发环境



### 4.2 总体设计

#### 4.2.1 总体设计方案



### 4.3 详细设计

#### 4.3.1 数据库设计



#### 4.3.2 功能模块实现



#### 4.3.3 界面实现



## 5 系统测试

### 5.1 单元测试

#### 5.1.1 功能测试



#### 5.1.2性能测试



### 5.2 集成测试

#### 5.2.1 功能测试

#### 5.2.2 性能测试

#### 5.2.3 用户体验评估

## 6 结论

### 6.1 总结

### 6.2 不足与改进

## 谢辞

## 参考文献



